(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{227:function(module,__webpack_exports__,__webpack_require__){"use strict";var C_Users_nesber_Desktop_electron_chat_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(22),C_Users_nesber_Desktop_electron_chat_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23),C_Users_nesber_Desktop_electron_chat_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25),C_Users_nesber_Desktop_electron_chat_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(24),C_Users_nesber_Desktop_electron_chat_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(26),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(29),_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_6__),_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(42),_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_7__),_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(133),_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_8__),_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(98),_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_9__),_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(16),_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_10__),_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(134),_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_11__),_material_ui_core_FormHelperText__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(135),_material_ui_core_FormHelperText__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_material_ui_core_FormHelperText__WEBPACK_IMPORTED_MODULE_12__),_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(136),_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_13__),_StringMessage__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(228),_NumberMessage__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(229),_ObjectMessage__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(230),styles=function(e){return{formControl:{margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit}}},SendMessage=function(_React$Component){function SendMessage(){var _getPrototypeOf2,_this;Object(C_Users_nesber_Desktop_electron_chat_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,SendMessage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=Object(C_Users_nesber_Desktop_electron_chat_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,(_getPrototypeOf2=Object(C_Users_nesber_Desktop_electron_chat_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(SendMessage)).call.apply(_getPrototypeOf2,[this].concat(args))),_this.state={event:"",message:"",tab:"String",error:!1},_this.onEventChange=function(e){var t=e.target.value;_this.setState({event:t})},_this.onMessageChange=function(e){var t=!1;"Object"===_this.state.tab&&(_this.isObject(e)||(t=!0));_this.setState({message:e,error:t})},_this.isObject=function(value){var evalResult;try{return eval("evalResult = ".concat(value)),"object"===typeof evalResult&&evalResult}catch(e){return!1}},_this.onSubmit=function(e){e.preventDefault();var value=_this.state.message;switch(_this.state.tab){case"Number":value=parseInt(value);break;case"Object":var evalResult;eval("evalResult = ".concat(value)),value=evalResult}_this.props.onSubmit(_this.state.event,value)},_this.handleTabChange=function(e){_this.setState({tab:e.target.value,message:"",error:!1})},_this}return Object(C_Users_nesber_Desktop_electron_chat_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(SendMessage,_React$Component),Object(C_Users_nesber_Desktop_electron_chat_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(SendMessage,[{key:"render",value:function(){var e=this.props.classes;return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("form",{className:e.root,onSubmit:this.onSubmit,autoComplete:"off"},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_6___default.a,{label:"Event name",required:!0,onChange:this.onEventChange,value:this.state.event,type:"text",fullWidth:!0,name:"event",margin:"dense",variant:"outlined"}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_11___default.a,{className:e.formControl},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_8___default.a,{htmlFor:"age-simple"},"Format"),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_13___default.a,{value:this.state.tab,onChange:this.handleTabChange,inputProps:{name:"age",id:"age-simple"}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_9___default.a,{value:"String"},"String"),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_9___default.a,{value:"Number"},"Number"),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_9___default.a,{value:"Object"},"Object")),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core_FormHelperText__WEBPACK_IMPORTED_MODULE_12___default.a,null,"Select message type")),"String"===this.state.tab&&react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_StringMessage__WEBPACK_IMPORTED_MODULE_14__.a,{onChange:this.onMessageChange,value:this.state.message}),"Number"===this.state.tab&&react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_NumberMessage__WEBPACK_IMPORTED_MODULE_15__.a,{onChange:this.onMessageChange,value:this.state.message}),"Object"===this.state.tab&&react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_ObjectMessage__WEBPACK_IMPORTED_MODULE_16__.a,{error:this.state.error,onChange:this.onMessageChange,value:this.state.message}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_7___default.a,{disabled:!this.props.connected||this.state.error,type:"submit",variant:"contained",color:"primary"},"Send"))}}]),SendMessage}(react__WEBPACK_IMPORTED_MODULE_5___default.a.Component);__webpack_exports__.a=Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_10__.withStyles)(styles)(SendMessage)},228:function(e,t,n){"use strict";var a=n(0),s=n.n(a),r=n(29),c=n.n(r);t.a=function(e){return s.a.createElement(c.a,{label:"Message",multiline:!0,rows:10,onChange:function(t){e.onChange(t.target.value)},value:e.value,type:"text",fullWidth:!0,name:"message",margin:"dense",variant:"outlined"})}},229:function(e,t,n){"use strict";var a=n(0),s=n.n(a),r=n(29),c=n.n(r);t.a=function(e){return s.a.createElement(c.a,{label:"Message",required:!0,onChange:function(t){e.onChange(t.target.value)},value:e.value,type:"number",fullWidth:!0,name:"message",margin:"dense",variant:"outlined"})}},230:function(e,t,n){"use strict";var a=n(0),s=n.n(a),r=n(29),c=n.n(r);t.a=function(e){return s.a.createElement(c.a,{label:"Object message",required:!0,error:e.error,multiline:!0,rows:10,onChange:function(t){e.onChange(t.target.value)},value:e.value,type:"text",fullWidth:!0,name:"message",margin:"dense",variant:"outlined"})}},240:function(e,t,n){e.exports=n(517)},413:function(e,t,n){},485:function(e,t){},517:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(15),c=n.n(r),o=n(30),i=n(93),_=n(70),l=n(22),u=n(23),m=n(25),d=n(24),g=n(94),E=n(26),p=n(239),h=n(214),v=n.n(h),f=n(16),b=n(5),O=n.n(b),C=n(209),D=n.n(C),M=n(212),P=n.n(M),S=n(213),y=n.n(S),I=n(131),k=n.n(I),T=n(41),A=n.n(T),R=n(215),w=n.n(R),B=n(132),L=n.n(B),j=n(211),U=n.n(j),W={success:D.a,warning:U.a,error:P.a,info:y.a};var K=Object(f.withStyles)(function(e){return{success:{backgroundColor:e.palette.success},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:k.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,n=e.className,a=e.message,r=e.onClose,c=e.variant,o=Object(p.a)(e,["classes","className","message","onClose","variant"]),i=W[c];return s.a.createElement(L.a,Object.assign({className:O()(t[c],n),"aria-describedby":"client-snackbar",message:s.a.createElement("span",{id:"client-snackbar",className:t.message},s.a.createElement(i,{className:O()(t.icon,t.iconVariant)}),a),action:[s.a.createElement(A.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:r},s.a.createElement(v.a,{className:t.icon}))]},o))}),x=Object(f.withStyles)(function(e){return{margin:{margin:e.spacing.unit}}})(function(e){var t=function(t,n){e.handleAlertClose(t,n)};return s.a.createElement(w.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:e.open,autoHideDuration:4e3,onClose:t},s.a.createElement(K,{onClose:t,variant:e.nature||"info",message:s.a.createElement("span",{id:"message-id"},e.content)}))}),N=n(20),q=n.n(N),F=n(237),H=n.n(F),z=n(236),J=n.n(z),$=n(238),V=n.n($),G=n(96),Y=n.n(G),Z=n(216),Q=n(234),X=n.n(Q),ee=n(232),te=n.n(ee),ne=n(97),ae=n.n(ne),se=n(235),re=n.n(se),ce=n(233),oe=n.n(ce),ie=n(218),_e=n.n(ie),le=n(217),ue=n.n(le),me=n(219),de=n.n(me),ge=n(220),Ee=n.n(ge),pe=n(95),he=n(18),ve=Object(he.j)({alertOpen:!1,alertNature:"error",alertContent:""}),fe=window.state=ve,be=function(e,t){"clickaway"!==t&&(ve.alertOpen=!1)},Oe=function(e,t){Object.assign(ve,{alertOpen:!0,alertNature:e,alertContent:t})},Ce=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).getType=function(e){switch(typeof e){case"string":return"String";case"object":return Array.isArray(e)?"Array":"Object";case"number":return"Number"}},n.onDataCopy=function(e){var t=document.createElement("textarea");if("object"===typeof e)try{e=JSON.stringify(e)}catch(a){return Oe("error","Unable to copy")}t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n)),Oe("success","Copied to clipboard!")},n}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.owner;return console.log("item rendering!",this.props),s.a.createElement(ue.a,null,s.a.createElement(_e.a,{style:{padding:"15px"}},s.a.createElement(q.a,{style:{float:"right"},color:"textSecondary",gutterBottom:!0},this.props.time),s.a.createElement(q.a,{color:"primary",gutterBottom:!0},t?"Sent":"Received"," event: ",this.props.eventName),s.a.createElement(q.a,{color:"textSecondary",gutterBottom:!0},"Type: ",this.getType(this.props.data)),s.a.createElement(pe.ObjectInspector,{theme:Object(i.a)({},pe.chromeLight,{TREENODE_FONT_SIZE:"18px",TREENODE_FONT_FAMILY:"roboto,helvetica,arial"}),data:this.props.data}),s.a.createElement("div",{style:{float:"right",position:"relative",left:"6px",bottom:"49px"}},s.a.createElement(Y.a,{title:"Copy to clipboard"},s.a.createElement(A.a,{onClick:function(){e.onDataCopy(e.props.data)}},s.a.createElement(de.a,{fontSize:"small"}))),t&&s.a.createElement("div",{style:{textAlign:"center"}},"  ",s.a.createElement(Ee.a,{style:{color:"success"===this.props.status?"green":"grey"}})))))}}]),t}(s.a.PureComponent),De=Object(f.withStyles)(function(e){return{success:{color:e.palette.success},pending:{color:e.palette.pending}}})(Ce),Me=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).scrollToBottom=function(){n.messagesDiv.scrollTop=n.messagesDiv.scrollHeight},n}return Object(E.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.messagesDiv=document.querySelector("#messages"),this.messagesList=document.querySelector("#messages_list")}},{key:"componentDidUpdate",value:function(e){if(console.log("prev props",e),console.log("current props",this.props),this.props.instanceId!==e.instanceId)return this.scrollToBottom();this.props.messages.length>0&&e.messages.length!==this.props.messages.length&&this.shouldScrollDown(this.props.messages[this.props.messages.length-1])&&this.scrollToBottom()}},{key:"shouldScrollDown",value:function(e){if(e.owner)return!0;if(this.messagesList.childNodes.length>1){var t=this.messagesDiv.scrollHeight;if(this.messagesDiv.clientHeight+this.messagesDiv.scrollTop+this.messagesList.childNodes[this.messagesList.childNodes.length-1].offsetHeight+this.messagesList.childNodes[this.messagesList.childNodes.length-2].offsetHeight>=t)return!0}return!1}},{key:"render",value:function(){return s.a.createElement("ul",{id:"messages_list",style:{listStyle:"none",paddingLeft:"0"}},this.props.messages.map(function(e,t){return s.a.createElement("li",{key:e.id,style:{display:"block",width:"100%",float:"left",marginBottom:"15px",marginTop:"15px"}},s.a.createElement("div",{style:{float:e.owner?"left":"right",width:"40%"}},s.a.createElement(De,e)))}))}}]),t}(s.a.Component),Pe=n(221),Se=n.n(Pe),ye=n(222),Ie=n.n(ye),ke=Object(f.withStyles)(function(e){return{chip:{}}})(function(e){var t=e.classes;return s.a.createElement(Se.a,{label:e.name,className:t.chip,color:"primary",icon:s.a.createElement(Ie.a,null),onDelete:e.onDelete,variant:"outlined"})}),Te={marginBottom:"10px",marginTop:"10px"},Ae=function(e){return console.log("events from props",e.events),s.a.createElement("div",null,s.a.createElement(q.a,{variant:"subtitle1",gutterBottom:!0},"Listening to events:"),e.events.map(function(t){return s.a.createElement("div",{style:Te},s.a.createElement(ke,{onDelete:function(){e.onEventDelete(t.name)},name:t.name}))}))},Re=n(137),we=n.n(Re),Be=(n(413),n(138)),Le=n.n(Be),je=n(226),Ue=n.n(je),We=n(42),Ke=n.n(We),xe=n(224),Ne=n.n(xe),qe=n(225),Fe=n.n(qe),He=n(40),ze=n(223),Je=n.n(ze);var $e=function(e){return s.a.createElement("div",null,s.a.createElement(Je.a,{size:21,color:"inherit"}))},Ve=n(69),Ge=n.n(Ve),Ye=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={address:"localhost:3001"},n.onChange=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(o.a)({},t,a))},n.onSubmit=function(e){switch(e.preventDefault(),n.props.connectionStatus){case"connected":case"reconnecting":case"connecting":n.onDisconnectSubmit();break;case"disconnected":n.onConnectSubmit()}},n.onConnectSubmit=function(e){n.props.onConnectSubmit(n.state.address)},n.onDisconnectSubmit=function(e){n.props.onDisconnectSubmit()},n.renderButton=function(){switch(n.props.connectionStatus){case"connected":return s.a.createElement(Ke.a,{type:"submit",color:"inherit"},"Disconnect");case"reconnecting":case"connecting":return s.a.createElement(Ke.a,{type:"submit",color:"inherit"},"Cancel");case"disconnected":return s.a.createElement(Ke.a,{type:"submit",color:"inherit"},"Connect")}},n.renderStatus=function(){switch(n.props.connectionStatus){case"reconnecting":case"connecting":return s.a.createElement($e,null);case"disconnected":return s.a.createElement(Ne.a,null);case"connected":return s.a.createElement(Fe.a,null);default:return""}},n}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t,n=this.props,a=n.classes,r=n.connectionStatus;return"connected"===r||"connecting"===r||"reconnecting"===r?(e=this.props.address,t=!0):(e=this.state.address,t=!1),s.a.createElement("form",{autoComplete:"off",onSubmit:this.onSubmit,className:a.root},s.a.createElement(ae.a,{position:"static"},s.a.createElement(Ue.a,null,s.a.createElement("div",{className:a.search},s.a.createElement("div",{className:a.searchIcon},this.renderStatus()),s.a.createElement(Ge.a,{disabled:t,name:"address",value:e,onChange:this.onChange,classes:{root:a.inputRoot,input:a.inputInput}})),this.renderButton())))}}]),t}(s.a.Component),Ze=Object(f.withStyles)(function(e){return{root:{flexGrow:1},search:Object(o.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(He.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(He.fade)(e.palette.common.white,.25)},marginRight:2*e.spacing.unit,marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:3*e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(o.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200})}})(Ye),Qe=n(29),Xe=n.n(Qe),et=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={event:""},n.onChange=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(o.a)({},t,a))},n.onSubmit=function(e){e.preventDefault(),n.props.onSubmit(n.state.event)},n}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement(Xe.a,{label:"Event name",required:!0,onChange:this.onChange,value:this.state.event,type:"text",fullWidth:!0,name:"event",margin:"dense",variant:"outlined"}),s.a.createElement(Ke.a,{disabled:!this.props.connected,type:"submit",variant:"contained",color:"primary"},"Register"))}}]),t}(s.a.Component),tt=n(227),nt=n(99),at=n(231),st=n.n(at),rt=Object(f.createMuiTheme)({palette:{primary:nt.blue,success:nt.green[600],pending:nt.grey}}),ct=Object(f.withStyles)({root:{textTransform:"initial",minHeight:"50px"}})(te.a),ot=Object(f.withStyles)({root:{fontSize:"20px",position:"absolute",top:"20px",right:"0px"}})(oe.a),it=Object(Z.a)(function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).getActiveInstance=function(){return console.log(n.state),n.state.instances.filter(function(e){return e.id===n.state.activeInstance})[0]},n.addInstance=function(){var e=n.generateInstance();n.setState(function(t){return{instances:[].concat(Object(_.a)(t.instances),[e]),activeInstance:e.id}})},n.generateInstance=function(){return{address:"",id:we()(),socket:null,messages:[],registeredEvents:{},anonymousEvents:{},allEventsChecked:!1,connectionStatus:"disconnected"}},n.connect=function(e){console.log("connecting");var t=n.state.activeInstance,a=n.getInstanceSlice(t),s=a.instances,r=a.instance;r.connectionStatus="connecting",n.setState(function(){return{instances:s}}),r.socket&&r.socket.disconnect();var c=r.socket=st()(e);r.originalOnevent=c.onevent,c.on("connect",function(){var a=n.getInstanceSlice(t),s=a.instances,r=a.instance;console.log("connected!"),r.connectionStatus="connected",r.address=e,n.setState(function(){return{instances:s}})}),c.on("disconnect",function(e){console.log("reason",e),"io server disconnect"===e&&c.disconnect()}),c.on("connect_error",function(e){Oe("error","Error connecting to the server")}),c.on("reconnect",function(e){var a=n.getInstanceSlice(t),s=a.instances;a.instance.connectionStatus="connected",console.log("reconnected"),fe.alertOpen=!1,n.setState(function(){return{instances:s}})}),c.on("reconnecting",function(e){console.log("reconnecting");var a=n.getInstanceSlice(t),s=a.instances;a.instance.connectionStatus="reconnecting",n.setState(function(){return{instances:s}})}),n.repeatEventRegistration(r)},n.repeatEventRegistration=function(e){if(Object.keys(e.registeredEvents).length>0){console.log("re-registering events");for(var t=Object.keys(e.registeredEvents),a=0;a<t.length;a++){var s=t[a];n.registerEvent(e.id,s)}}e.allEventsChecked&&n.listenToAllEvents(e.id,!0)},n.registerEvent=function(e,t){var a=n.getInstanceSlice(e),s=a.instances,r=a.instance,c=r.socket;c&&(c.off(t),c.on(t,function(a){n.addMessageToState(e,t,a,!1)})),r.registeredEvents[t]={name:t},n.setState(function(){return{instances:s}})},n.addMessageToState=function(e,t,a,s){var r=we()(),c=n.getInstanceSlice(e),o=c.instances,i=c.instance,l=n.getTime();return i.messages=[].concat(Object(_.a)(i.messages),[{id:r,eventName:t,time:l,data:a,owner:s,status:"pending"}]),n.setState(function(){return{instances:o}}),r},n.getInstanceSlice=function(e){var t,a=Object(_.a)(n.state.instances);return a.forEach(function(n,s){n.id===e&&(t=a[s])}),{instance:t,instances:a}},n.getInstanceReference=function(e){var t;return n.state.instances.forEach(function(a,s){a.id===e&&(t=n.state.instances[s])}),{instance:t,instances:n.state.instances}},n.listenToAllEvents=function(e,t){var a=n.getInstanceSlice(e).instance,s=a.socket,r=Object(g.a)(n);t?s.onevent=function(t){var n=t.data[0],s=t.data[1];r.registerAnonymousEvent(e,n,s),a.originalOnevent.call(this,t)}:(s.onevent=a.originalOnevent,r.unregisterAnonymousEvents(e))},n.registerAnonymousEvent=function(e,t){console.log("registering anonymous event:",t);var a=n.getInstanceSlice(e),s=a.instances,r=a.instance;r.anonymousEvents[t]={name:t};var c=r.socket;c&&(c.off(t),c.on(t,function(a){console.log("on:",t),n.addMessageToState(e,t,a,!1)})),n.setState(function(){return{instances:s}})},n.unregisterAnonymousEvents=function(e){var t=n.getInstanceSlice(e),a=t.instances,s=t.instance,r=s.socket;for(var c in s.anonymousEvents)s.registeredEvents.hasOwnProperty(c)||r.off(c);s.anonymousEvents={},n.setState(function(){return{instances:a}})},n.onMessagesDelete=function(){var e=n.state.activeInstance,t=n.getInstanceSlice(e),a=t.instances;t.instance.messages=[],n.setState(function(){return{instances:a}})},n.onConnectSubmit=function(e){n.connect(e)},n.onDisconnectSubmit=function(){var e=n.state.activeInstance,t=n.getInstanceSlice(e),a=t.instances,s=t.instance,r=s.socket;console.log("disconnected manually"),r.disconnect(),s.connectionStatus="disconnected",n.setState(function(){return{instances:a}})},n.onMessageSubmit=function(e,t){var a=n.state.activeInstance,s=n.getInstanceSlice(a).instance.socket,r=n.addMessageToState(a,e,t,!0);n.sendMessageToServer(s,e,t,function(e){console.log("data from callback",e),n.changeMessage(a,r,"status","success")})},n.sendMessageToServer=function(e,t,n,a){e.emit(t,n,a)},n.changeMessage=function(e,t,a,s){var r=n.getInstanceSlice(e),c=r.instances,_=r.instance;n.setState(function(){var e=_.messages.map(function(e){return e.id===t?Object(i.a)({},e,Object(o.a)({},a,s)):e});return _.messages=e,{instances:c}})},n.onEventSubmit=function(e,t){console.log(e,t),n.registerEvent(e,t)},n.onEventDelete=function(e){var t=n.state.activeInstance,a=n.getInstanceSlice(t),s=a.instances,r=a.instance;r.socket.off(e),delete r.registeredEvents[e],n.setState({instances:s})},n.getSocketByInstanceId=function(e){return n.state.instances.filter(function(t){return t.id===e})[0].socket},n.handleAllEventsCheck=function(e){return function(e){var t=n.getInstanceSlice(n.state.activeInstance),a=t.instances,s=t.instance,r=e.target.checked;s.allEventsChecked=r,n.setState(function(){return{instances:a}}),n.listenToAllEvents(s.id,r)}},n.getTime=function(){var e=n.getMoment();return Le()(1e3*e).format("HH:mm")},n.getMoment=function(){return Le()().unix()},n.handleAlertClose=function(e,t){be(e,t)},n.changeActiveInstance=function(e){n.setState(function(){return{activeInstance:e}})},n.createNewTab=function(){var e=n.generateInstance();n.setState(function(t){return{instances:[].concat(Object(_.a)(t.instances),[e])}}),n.changeActiveInstance(e.id)},n.destroyInstance=function(e,t){e.stopPropagation(),console.log("destroy instance!");var a=n.getInstanceSlice(t),s=a.instances,r=a.instance;console.log(r.socket),r.socket&&r.socket.disconnect();var c,o=s.indexOf(r);c=s.length-o===1?o-1:o;var i=s.filter(function(e){return e.id!==t}),_=i[c];n.setState({activeInstance:_.id,instances:i})},n.getTabAddress=function(e){var t=e.address,n=e.connectionStatus;return"connected"===n?t.length>14?t.slice(0,14)+"...":t:"disconnected"===n?"New connection":n+"..."};var a=n.generateInstance();return n.state={instances:[a],activeInstance:a.id},n}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.getInstanceSlice(this.state.activeInstance),n=t.instance,a=t.instances,r=n.connectionStatus,c=n.allEventsChecked,o=n.registeredEvents,i=n.messages,_=n.address;console.log("length from app render",i.length);var l=n.id,u=a.indexOf(n),m=a[0];return console.log("tab index",u),s.a.createElement(f.MuiThemeProvider,{theme:rt},s.a.createElement("div",{id:"wrapper"},s.a.createElement(ae.a,{color:"default",position:"static"},s.a.createElement(X.a,{indicatorColor:"primary",textColor:"primary",value:u,onChange:this.handleChange},a.map(function(t){return s.a.createElement(ct,{onClick:function(){e.changeActiveInstance(t.id)},label:e.getTabAddress(t),icon:t.id!==m.id?s.a.createElement(ot,{onClick:function(n){e.destroyInstance(n,t.id)}}):null})}),s.a.createElement(A.a,{onClick:this.createNewTab,"aria-label":"New tab"},s.a.createElement(re.a,null)))),s.a.createElement(Ze,{address:_,connectionStatus:r,onDisconnectSubmit:this.onDisconnectSubmit,onConnectSubmit:this.onConnectSubmit}),s.a.createElement("div",{id:"main"},s.a.createElement("div",{className:"special_scroll",id:"panel"},s.a.createElement("div",{id:"send_messages"},s.a.createElement(q.a,{gutterBottom:!0,variant:"h6"},"Send messages"),s.a.createElement(tt.a,{connected:"connected"===r,onSubmit:this.onMessageSubmit})),s.a.createElement("div",{id:"events"},s.a.createElement(q.a,{gutterBottom:!0,variant:"h6"},"Register events"),s.a.createElement(J.a,{control:s.a.createElement(H.a,{disabled:"connected"!==r,checked:c,onChange:this.handleAllEventsCheck("allEventsChecked"),value:"allEventsChecked",color:"primary"}),label:"Listen to all incoming events"}),s.a.createElement(et,{connected:"connected"===r,onSubmit:function(t){e.onEventSubmit(l,t)}}),Object.keys(o).length>0&&s.a.createElement("div",{id:"registered_events"},s.a.createElement(Ae,{onEventDelete:this.onEventDelete,events:Object.values(o)})))),s.a.createElement("div",{className:"special_scroll",id:"messages"},s.a.createElement(q.a,{variant:"h6",gutterBottom:!0},"Messages sent/received",i.length>0&&s.a.createElement("div",{style:{float:"right"}},s.a.createElement(Y.a,{title:"Delete all messages"},s.a.createElement(A.a,{onClick:this.onMessagesDelete,"aria-label":"Delete"},s.a.createElement(V.a,{fontSize:"small",color:"secondary"}))))),s.a.createElement(Me,{instanceId:l,messages:i}),s.a.createElement("div",{style:{float:"left",clear:"both"},id:"dummy"})))),s.a.createElement(x,{nature:fe.alertNature,handleAlertClose:this.handleAlertClose,open:fe.alertOpen,content:fe.alertContent}))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(it,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[240,1,2]]]);
//# sourceMappingURL=main.1f7d1d12.chunk.js.map